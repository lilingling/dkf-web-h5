<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>固收购买</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no" />
    <link rel="stylesheet" href="../../css/sm.css">
    <link rel="stylesheet" href="../../css/sm-extend.css">
    <link rel="stylesheet" href="../../css/product.css">
</head>

<body>
    <div class="page-group">
        <div class="page page-current">
            <div class="content" id="productDetail">
                <div class="buy-header">
                    <div class="buy-product">
                        <div class="row">
                            <div class="prop-name">预期年化</div>
                            <div class="prop-name">投资期限</div>
                            <div class="blank"></div>
                        </div>
                        <div class="row">
                            <div class="prop-value product-rate"><span v-text="productDetail.profitRate"></span>%</div>
                            <div class="prop-value product-deadline"><span v-text="productDetail.loanDeadline"></span>个月</div>
                            <div class="blank"></div>
                        </div>
                        <div class="row">
                            <div class="product-value product-amount">募集总额(元)：<strong v-text="productDetail.amount"></strong></div>
                            <div class="percentage-box">
                                <div class="percentage" data-percentange="{{productDetail.percentage}}"></div>
                                <div class="percentage-value">
                                    {{productDetail.percentage}}<span>%</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="percentage-line">
                        <div class="percent"></div>
                    </div>
                </div>
                <div class="buy-content">
                    <div class="project-cycle">
                        <p class="caption">项目周期</p>
                        <div class="legend">
                            <i class="icon icon-legend-start active"></i>
                            <i class="line"></i>
                            <i class="icon icon-legend-raise"></i>
                            <i class="line"></i>
                            <i class="icon icon-legend-refund"></i>
                        </div>
                        <div class="row">
                            <div class="prop-name">开始投资</div>
                            <div class="prop-name">募集成功</div>
                            <div class="prop-name">到期还款</div>
                        </div>
                        <div class="row">
                            <div class="prop-value " v-text="productDetail.onshelfTIme"></div>
                            <div class="prop-value ">成功日期：T</div>
                            <div class="prop-value ">T+12个月</div>
                        </div>
                    </div>
                    <div class="project-details">
                        <div class="list-block">
                            <ul>
                                <li class="item-content ">
                                    <div class="item-inner">
                                        <div class="item-title">资金用途：</div>
                                        <div class="item-after" v-text="productDetail.usage"></div>
                                    </div>
                                </li>
                                <li class="item-content ">
                                    <div class="item-inner">
                                        <div class="item-title">还款方式：</div>
                                        <div class="item-after open-options">一次性还本付息</div>
                                    </div>
                                </li>
                                <li class="item-content ">
                                    <div class="item-inner">
                                        <div class="item-title">最小投资额：</div>
                                        <div class="item-after">{{productDetail.minAmount}}元起投</div>
                                    </div>
                                </li>
                                <li class="item-content ">
                                    <div class="item-inner">
                                        <div class="item-title">最大投资额：</div>
                                        <div class="item-after">{{productDetail.maxAmount}}元</div>
                                    </div>
                                </li>
                                <li class="item-content ">
                                    <div class="item-inner">
                                        <div class="item-title">投资结束倒计时：</div>
                                        <div class="item-after">3天1时6分</div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="buy-footer">
                    <div class="row no-gutter">
                        <div class="col-33">项目介绍</div>
                        <div class="col-33">投资记录</div>
                        <div class="col-33">更多问题</div>
                    </div>
                </div>
                <div class="butn-box">
                    <input type="button" value="立即投资" class="button button-fill open-invest">
                </div>
            </div>
        </div>
        <div class="page" id="page2">
            <div class="content">
                <div class="buy-confirm-header">
                    <div class="buy-product">
                        <p class="order-number">订单号：12345678</p>
                        <div class="row row-name">
                            <div class="prop-value product-rate"><span>12</span>%</div>
                            <div class="prop-value product-deadline"><span>3</span>个月</div>
                            <div class="prop-value product-profit"><span>950</span></div>
                            <div class="blank"></div>
                        </div>
                        <div class="row row-value">
                            <div class="prop-name">预期年化</div>
                            <div class="prop-name">投资期限</div>
                            <div class="prop-name">预计收益(元)</div>
                            <div class="blank"></div>
                        </div>
                        <div class="row no-gutter">
                            <div class="col-33">
                                <p class="prop-name"><i class="icon icon-confirm-start"></i>起息日</p>
                                <p class="prop-value">满额T+1日</p>
                            </div>
                            <div class="col-33">
                                <p class="prop-name"><i class="icon icon-confirm-amount"></i>订单金额</p>
                                 <p class="prop-value">2500(元)</p>
                            </div>
                            <div class="col-33">
                                <p class="prop-name"><i class="icon icon-confirm-refundType"></i>还款方式</p>
                                <p class="prop-value">一次性还本付息</p>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="butn-box butn-confirmpay">
                    <p>实付金额(元)：<strong>1,000</strong></p>
                    <input type="button" value="确认支付" class="button button-fill">
                </div>
            </div>
        </div>
    </div>
    <div class="popup popup-invest">
        <div class="popup-invest-list">
            <div class="list-block" style="margin-top:0">
                <ul>
                    <li class="item-content ">
                        <div class="item-inner">
                            <div class="item-title">资金用途：</div>
                            <div class="item-after">汽车消费贷款</div>
                        </div>
                    </li>
                    <li class="item-content ">
                        <div class="item-inner">
                            <div class="item-title">还款方式：</div>
                            <div class="item-after">一次性还本付息</div>
                        </div>
                    </li>
                    <li class="item-content ">
                        <div class="item-inner">
                            <div class="item-title">最小投资额：</div>
                            <div class="item-after">100元起投</div>
                        </div>
                    </li>
                    <li class="item-content ">
                        <div class="item-inner">
                            <div class="item-title">最大投资额：</div>
                            <div class="item-after">10，0000元</div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="invest-input-box">
            <div class="row">
                <div class="prop-name">请输入投资金额(元)</div>
                <div class="prop-name" style="color:#f59058">预计收益(元)</div>
            </div>
            <div class="row">
                 <input type="text" placeholder="0.00" id="recharge_money" readonly="readonly">
                 <label class="profit" style="color:#f59058">100</label>
            </div>
            <input type="button" value="立即投资" class="button button-fill" id="butn_invest">
        </div>
    </div>
</body>
<script type='text/javascript' src='../../js/lib.min.js' charset='utf-8'></script>
<script type='text/javascript' src='../../js/base.js' charset='utf-8'></script>
<script>

    $(function() {
        var url = 'http://192.168.1.220:8080/dkf-web/';
        new Vue({
            el:'#productDetail',
            data:{
                productDetail:''
            },
            methods:{
                initData: function() {
                    var _self = this;
                    $.ajax({
                        url: url+'product/showProductDetailOfRZZL',
                        type: 'POST',
                        data: JSON.stringify({"eid": base.getQueryString('eid')}),
                        success: function(res) {
                            _self.productDetail = res.data;
                            console.log('====='+_self.productDetails)
                        }
                    });
                }
            },
            ready:function() {
                this.initData();
            }
        })








































    $.init();
    var KeyBoard = function(input, options) {
        var body = document.getElementsByClassName('popup')[0];
        var DIV_ID = options && options.divId || '__w_l_h_v_c_z_e_r_o_divid';

        if (document.getElementById(DIV_ID)) {
            body.removeChild(document.getElementById(DIV_ID));
        }

        this.input = input;
        this.el = document.createElement('div');

        var self = this;
        var zIndex = options && options.zIndex || 20000;
        var width = options && options.width || '100%';
        var height = options && options.height || '9.75rem';
        var fontSize = options && options.fontSize || '15px';
        var backgroundColor = options && options.backgroundColor || '#fff';
        var TABLE_ID = options && options.table_id || 'table_keyboard';
        var mobile = typeof orientation !== 'undefined';

        this.el.id = DIV_ID;
        // this.el.style.position = 'relative';
        // this.el.style.left = 0;
        // this.el.style.right = 0;
        // this.el.style.bottom = '-9.75rem';
        // this.el.style.zIndex = zIndex;
        this.el.style.width = width;
        this.el.style.height = height;
        this.el.style.backgroundColor = backgroundColor;
        //样式

        //table
        var tableStr = '<table id="' + TABLE_ID + '" border="0" cellspacing="0" cellpadding="0">';
        tableStr += '<tr><td>1<img src="../../img/blank.png"/></td><td>2<img src="../../img/abc.png"/></td><td>3<img src="../../img/def.png"/></td></tr>';
        tableStr += '<tr><td>4<img src="../../img/ghi.png"/></td><td>5<img src="../../img/jkl.png"/></td><td>6<img src="../../img/mno.png"/></td></tr>';
        tableStr += '<tr><td>7<img src="../../img/pqrs.png"/></td><td>8<img src="../../img/tuv.png"/></td><td>9<img src="../../img/wxyz.png"/></td></tr>';
        tableStr += '<tr><td style="background-color:#d4d8db;">.</td><td>0</td>';
        tableStr += '<td style="background-color:#d4d8db;"><span class="icon icon-keyboard-delete" style="font-size:0;" >删除</span></td></tr>';
        tableStr += '</table>';
        this.el.innerHTML = tableStr;

        // 6个表单输入框
        var inputDiv = document.getElementsByClassName("inner-box");

        function addEvent(e) {
            var ev = e || window.event;
            var clickEl = ev.element || ev.target;
            var value = clickEl.textContent || clickEl.innerText;
            if (clickEl.tagName.toLocaleLowerCase() === 'td' && value !== "删除") {
                if (self.input) {
                    self.input.value += value;
                }
            } else if (clickEl.tagName.toLocaleLowerCase() === 'span' && value === "删除") {
                var num = self.input.value;
                if (num) {
                    var newNum = num.substr(0, num.length - 1);
                    self.input.value = newNum;
                }
            }
            // // 点亮充值按钮
            if (this.textContent == '') {
                $('.jbutn-recharge').attr('disabled','disabled');
            } else {
                $('.jbutn-recharge').removeAttr('disabled');
            }
            // 方格显示输入数字
            if (self.input.id == 'pwd_input' || self.input.id == 'pwd_input1') {
                var pwdValue = self.input.value;
                var len = pwdValue.length;
                if (value == '删除') {
                    inputDiv[len].childNodes[0].value = '';
                }
                for (var i = 0; i < len; i++) {
                    inputDiv[i].childNodes[0].value = pwdValue[i];
                }
                if (len >= 6) {
                     $('#table_keyboard').removeClass('active');
                     $('.modal').removeClass('moveUp');
                    if (self.input.id == 'pwd_input') {
                        $.closeModal(vm.pwdModal);
                         // 绑定实名付弹窗
                        var realnameModal = $.modal({
                            text: '<div class="realname-alert-content">'
                            + '<div class="jclose">' + '<div class="left-line line"></div>' + '<div class="right-line line"></div>' + '</div>'
                            + '<img src="../../img/card_icon@2x.png" class="">' + '<p>尊敬的用户，您正在通过通联支付开通银行卡代扣支付功能。</p>'
                             + '<div class="phoneNum-row">' + '<label>预留手机号:</label>' + '<label>18511745835</label>' + '</div>'
                              + '<div class="verifiyCode-row">' + '<label>短信验证码:</label>'
                              + '<div class="input-box">'
                              + '<div class="inner-box"><input type="password" readonly="readonly" /></div>'
                              + '<div class="inner-box"><input type="password" readonly="readonly" /></div>'
                              + '<div class="inner-box"><input type="password" readonly="readonly" /></div>'
                              + '<div class="inner-box"><input type="password" readonly="readonly" /></div>'
                              + '<div class="inner-box"><input type="password" readonly="readonly" /></div>'
                              + '<div class="inner-box"><input type="password" readonly="readonly" /></div>'
                              + '<input type="tel" id="pwd_input1" readonly="readonly"/>'
                              + '</div>'
                              + '</div>'
                              + '<p class="secondSend-tips">' + '没收到验证码？<a href="">再次发送</a>' + '</p>'
                              + '</div>',
                            buttons: [{
                                text: '确定',
                                onClick: function() {}
                            }]

                        });
                    }
                    else if(self.input.id == 'pwd_input1') {
                        $.closeModal(realnameModal);
                    }
                    var pwdInput1 = document.getElementById('pwd_input1');
                    pwdInput1.onclick = function() {
                        $('.modal').addClass('moveUp');
                        new KeyBoard(pwdInput1);
                        setTimeout(function() {
                            $('#table_keyboard').addClass('active');
                        }, 200)

                    };
                    $('body').on('tap', '.jclose', function() {
                        $.closeModal(realnameModal);
                    });


            }
        }

    }

    if (mobile) {
        this.el.ontouchstart = addEvent;
    } else {
        this.el.onclick = addEvent;
    }
    body.appendChild(this.el);
}
    $(document).on('click', '.open-invest', function() {
        new KeyBoard(recharge_money);
        $.popup('.popup-invest');
    });
    $(document).on('click', '.popup-overlay', function() {
        $.closeModal('.popup-invest');
    });

    $(document).on('click', '#butn_invest', function() {
        $.closeModal('.popup-invest');
        $.router.load("#page2");

    });


});
</script>

</html>
